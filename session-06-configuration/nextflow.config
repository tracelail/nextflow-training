// Default parameters
params {
    input = "data/samples.csv"
    outdir = "results"
}

// Default process settings
process {
    cpus = 1
    memory = '2.GB'
    time = '1.h'
}

// Profile definitions
profiles {
    // Local execution without containers
    local {
        process {
            executor = 'local'
            withLabel: process_low {
                cpus = 1
                memory = '2.GB'
            }
            withLabel: process_medium {
                cpus = 2
                memory = '4.GB'
            }
            withLabel: process_high {
                cpus = 4
                memory = '8.GB'
            }
        }
    }
    
    // Docker execution
    docker {
        docker.enabled = true
        docker.runOptions = '-u $(id -u):$(id -g)'
        
        process {
            withLabel: process_low {
                cpus = 1
                memory = '2.GB'
            }
            withLabel: process_medium {
                cpus = 2
                memory = '4.GB'
            }
            withLabel: process_high {
                cpus = 4
                memory = '8.GB'
            }
        }
    }
    
    // Singularity execution
    singularity {
        singularity.enabled = true
        singularity.autoMounts = true
        
        process {
            withLabel: process_low {
                cpus = 1
                memory = '2.GB'
            }
            withLabel: process_medium {
                cpus = 2
                memory = '4.GB'
            }
            withLabel: process_high {
                cpus = 4
                memory = '8.GB'
            }
        }
    }
    
    // Laptop development profile with resource limits
    laptop {
        docker.enabled = true
        
        resourceLimits {
            cpus = 4
            memory = '8.GB'
            time = '2.h'
        }
        
        process {
            withLabel: process_low {
                cpus = 1
                memory = '1.GB'
            }
            withLabel: process_medium {
                cpus = 2
                memory = '2.GB'
            }
            withLabel: process_high {
                cpus = 3
                memory = '4.GB'
            }
        }
    }
    
    // SLURM executor for HPC
    slurm {
        process {
            executor = 'slurm'
            queue = 'general'
            clusterOptions = '--account=myproject'
            
            withLabel: process_low {
                cpus = 2
                memory = '4.GB'
                time = '2.h'
            }
            withLabel: process_medium {
                cpus = 8
                memory = '16.GB'
                time = '8.h'
            }
            withLabel: process_high {
                cpus = 16
                memory = '64.GB'
                time = '24.h'
            }
            
            // Process-specific override
            withName: SUMMARIZE {
                cpus = 1
                memory = '2.GB'
                time = '30.m'
                queue = 'express'
            }
        }
    }
}
